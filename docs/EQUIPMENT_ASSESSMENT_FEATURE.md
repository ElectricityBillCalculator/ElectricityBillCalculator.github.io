# ฟีเจอร์ใบประเมินอุปกรณ์ (Equipment Assessment Feature)

## ภาพรวม
ฟีเจอร์ใบประเมินอุปกรณ์ช่วยให้ผู้ดูแลระบบสามารถสร้างและดาวน์โหลดแบบฟอร์มตรวจสอบอุปกรณ์ในห้องพักได้ โดยมีรายการอุปกรณ์มาตรฐานและสามารถเพิ่มรายการใหม่ได้

## ฟีเจอร์หลัก

### 1. การเข้าถึงฟีเจอร์
- **จากหน้า Home**: คลิกปุ่ม <i class="fas fa-clipboard-check"></i> ใน room card
- **จาก Room Settings**: คลิกปุ่ม "สร้างใบประเมินใหม่" ในส่วนใบประเมินอุปกรณ์

### 2. รายการอุปกรณ์มาตรฐาน
ระบบมีรายการอุปกรณ์มาตรฐาน 23 รายการ แบ่งเป็นหมวดหมู่:

#### เครื่องปรับอากาศ
- แอร์คอนดิชัน
- พัดลม

#### เครื่องใช้ไฟฟ้า
- ตู้เย็น
- ทีวี
- เครื่องซักผ้า
- เตาไฟฟ้า
- ไมโครเวฟ

#### เฟอร์นิเจอร์
- ตู้เสื้อผ้า
- เตียง
- โต๊ะทำงาน
- เก้าอี้

#### แสงสว่าง
- โคมไฟ

#### ตกแต่ง
- พรม
- ผ้าม่าน

#### ความปลอดภัย
- กุญแจ

#### โครงสร้าง
- ประตู
- หน้าต่าง
- พื้น
- ผนัง

#### สุขภัณฑ์
- ห้องน้ำ
- อ่างล้างหน้า
- ฝักบัว
- ชักโครก

### 3. การประเมินสภาพอุปกรณ์
แต่ละอุปกรณ์สามารถประเมินสภาพได้ 6 ระดับ:
- **ดีเยี่ยม** (Excellent)
- **ดี** (Good) - ค่าเริ่มต้น
- **ปานกลาง** (Fair)
- **แย่** (Poor)
- **เสียหาย** (Damaged)
- **หายไป** (Missing)

### 4. ข้อมูลที่บันทึก
สำหรับแต่ละอุปกรณ์:
- ชื่ออุปกรณ์
- หมวดหมู่
- จำนวน
- สภาพ
- หมายเหตุเพิ่มเติม

### 5. การดาวน์โหลดแบบฟอร์ม
- แบบฟอร์มจะถูกสร้างเป็นรูปภาพ PNG
- ชื่อไฟล์: `ใบประเมินอุปกรณ์_ห้อง[เลขห้อง]_[วันที่].png`
- เนื้อหาประกอบด้วย:
  - ข้อมูลห้อง (เลขห้อง, ผู้เช่า, ขนาดห้อง, วันที่ตรวจสอบ)
  - ตารางรายการอุปกรณ์
  - หมายเหตุเพิ่มเติม
  - ส่วนลงนาม (ผู้ตรวจสอบและผู้เช่า)

### 6. การบันทึกข้อมูล
- ข้อมูลการประเมินจะถูกบันทึกใน Firebase Database
- โครงสร้าง: `assessments/{roomId}`
- ข้อมูลที่บันทึก:
  - รายการอุปกรณ์ทั้งหมด
  - หมายเหตุ
  - วันที่ประเมิน
  - ผู้สร้าง
  - ข้อมูลห้อง

## การใช้งาน

### ขั้นตอนการสร้างใบประเมิน

1. **เปิด Modal ใบประเมิน**
   - คลิกปุ่ม <i class="fas fa-clipboard-check"></i> ใน room card
   - หรือคลิก "สร้างใบประเมินใหม่" ใน room settings

2. **ตรวจสอบข้อมูลห้อง**
   - ระบบจะแสดงข้อมูลห้องอัตโนมัติ
   - วันที่ตรวจสอบจะถูกตั้งเป็นวันปัจจุบัน

3. **ประเมินอุปกรณ์**
   - ตรวจสอบรายการอุปกรณ์มาตรฐาน
   - เลือกสภาพของแต่ละอุปกรณ์
   - ระบุจำนวนและหมายเหตุ
   - เพิ่มรายการใหม่หากจำเป็น

4. **เพิ่มหมายเหตุ**
   - บันทึกหมายเหตุเพิ่มเติมในช่องข้อความ

5. **ดาวน์โหลดหรือบันทึก**
   - คลิก "ดาวน์โหลดแบบฟอร์ม" เพื่อดาวน์โหลดเป็นรูปภาพ
   - คลิก "บันทึกข้อมูล" เพื่อบันทึกลงฐานข้อมูล

### การเพิ่มรายการอุปกรณ์ใหม่

1. คลิกปุ่ม "เพิ่มรายการอุปกรณ์"
2. ระบุหมวดหมู่และชื่ออุปกรณ์
3. เลือกสภาพและจำนวน
4. เพิ่มหมายเหตุหากจำเป็น

### การลบรายการอุปกรณ์

- คลิกไอคอน <i class="fas fa-trash"></i> ที่รายการที่ต้องการลบ

## ข้อกำหนดทางเทคนิค

### Dependencies
- `html2canvas`: สำหรับแปลง HTML เป็นรูปภาพ
- Firebase Database: สำหรับเก็บข้อมูลการประเมิน
- Firebase Storage: สำหรับเก็บไฟล์รูปภาพ (ถ้ามี)

### ไฟล์ที่เกี่ยวข้อง
- `script.js`: ฟังก์ชันหลักของฟีเจอร์
- `home.html`: Modal และ UI elements
- `styles.css`: CSS styles สำหรับ UI

### ฟังก์ชันหลัก
- `openAssessmentModal()`: เปิด modal ใบประเมิน
- `generateEquipmentChecklist()`: สร้างรายการอุปกรณ์มาตรฐาน
- `downloadAssessmentForm()`: ดาวน์โหลดแบบฟอร์ม
- `saveAssessmentData()`: บันทึกข้อมูลลงฐานข้อมูล
- `collectAssessmentData()`: รวบรวมข้อมูลจากฟอร์ม
- `generateAssessmentFormHTML()`: สร้าง HTML สำหรับแบบฟอร์ม

## การปรับแต่ง

### เพิ่มรายการอุปกรณ์มาตรฐาน
แก้ไขฟังก์ชัน `generateEquipmentChecklist()` ใน `script.js`:

```javascript
const defaultEquipment = [
    { name: 'ชื่ออุปกรณ์ใหม่', category: 'หมวดหมู่ใหม่' },
    // เพิ่มรายการอื่นๆ
];
```

### ปรับแต่งแบบฟอร์ม
แก้ไขฟังก์ชัน `generateAssessmentFormHTML()` เพื่อปรับแต่ง:
- สีและฟอนต์
- ขนาดและรูปแบบตาราง
- ข้อมูลที่แสดง
- ส่วนลงนาม

### เพิ่มหมวดหมู่ใหม่
1. เพิ่มใน `defaultEquipment`
2. ปรับแต่ง CSS หากจำเป็น
3. อัปเดตเอกสาร

## การแก้ไขปัญหา

### ปัญหาที่พบบ่อย

1. **ไม่สามารถดาวน์โหลดได้**
   - ตรวจสอบว่า `html2canvas` โหลดสำเร็จ
   - ตรวจสอบสิทธิ์การเขียนไฟล์

2. **ข้อมูลไม่บันทึก**
   - ตรวจสอบการเชื่อมต่อ Firebase
   - ตรวจสอบสิทธิ์การเขียนฐานข้อมูล

3. **Modal ไม่เปิด**
   - ตรวจสอบว่า modal element มีอยู่
   - ตรวจสอบ JavaScript errors

### การ Debug
- เปิด Developer Tools
- ตรวจสอบ Console สำหรับ errors
- ตรวจสอบ Network tab สำหรับการเชื่อมต่อ Firebase

## การพัฒนาต่อ

### ฟีเจอร์ที่อาจเพิ่มในอนาคต
- การส่งอีเมลแบบฟอร์ม
- การพิมพ์แบบฟอร์ม
- การเปรียบเทียบการประเมินหลายครั้ง
- การแจ้งเตือนอุปกรณ์เสียหาย
- การติดตามการซ่อมแซม
- การสร้างรายงานสรุป 