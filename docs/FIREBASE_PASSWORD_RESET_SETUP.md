# การตั้งค่า Firebase สำหรับการรีเซ็ตรหัสผ่าน

เอกสารนี้จะแนะนำขั้นตอนการตั้งค่าที่จำเป็นในโปรเจกต์ Firebase ของคุณเพื่อให้ฟังก์ชัน "ลืมรหัสผ่าน" สามารถส่งอีเมลไปยังผู้ใช้ได้อย่างถูกต้อง

## ปัญหาที่พบบ่อย
หลังจากติดตั้งโค้ดสำหรับ `sendPasswordResetEmail` แล้ว อีเมลอาจยังไม่ถูกส่งถ้าโปรเจกต์ Firebase ของคุณยังไม่ได้ตั้งค่าอย่างสมบูรณ์ สาเหตุหลักคือ:
1.  **โดเมนไม่ได้รับอนุญาต (Unauthorized Domain):** Firebase จะบล็อกการส่งอีเมลจากโดเมนที่ไม่ได้รับการยืนยันเพื่อป้องกันสแปม
2.  **ไม่ได้ตั้งค่า Template อีเมล:** แม้ว่าจะมี Template เริ่มต้น แต่การตรวจสอบและปรับแต่งจะช่วยให้แน่ใจว่าทุกอย่างถูกต้อง

---

## ขั้นตอนการแก้ไข

คุณจำเป็นต้องเข้าไปตั้งค่าใน **Firebase Console** ของโปรเจกต์คุณ

### 1. เพิ่มโดเมนที่ได้รับอนุญาต (Authorize Domain)

นี่เป็นขั้นตอนที่สำคัญที่สุด

1.  ไปที่ **Firebase Console**: [https://console.firebase.google.com/](https://console.firebase.google.com/)
2.  เลือกโปรเจกต์ของคุณ (`electricity-bill-calcula-ea4a2`)
3.  จากเมนูด้านซ้าย ไปที่ **Authentication**
4.  คลิกที่แท็บ **Settings**
5.  เลือก **Authorized domains** จากเมนูย่อย
6.  คลิกที่ปุ่ม **Add domain**
7.  ในช่องที่ปรากฏขึ้น ให้กรอกโดเมนที่คุณใช้งานอยู่:
    ```
    bravealltime.github.io
    ```
8.  คลิก **Add** เพื่อบันทึก

หลังจากเพิ่มโดเมนนี้แล้ว Firebase จะอนุญาตให้ส่งอีเมลรีเซ็ตรหัสผ่านเมื่อมีการร้องขอจากเว็บไซต์ของคุณ

### 2. ตรวจสอบและปรับแต่ง Template อีเมล (แนะนำ)

คุณสามารถปรับแต่งอีเมลที่จะส่งหาผู้ใช้ได้ เพื่อให้มีชื่อผู้ส่งและเนื้อหาที่เป็นมิตรมากขึ้น

1.  ในหน้า **Authentication** ให้ไปที่แท็บ **Templates**
2.  เลือก **Password reset** จากรายการ
3.  คุณสามารถแก้ไขสิ่งต่างๆ ได้ที่นี่:
    *   **Sender name:** ชื่อผู้ส่งที่ผู้ใช้จะเห็นในอีเมล (เช่น "ระบบจัดการหอพัก")
    *   **Subject:** หัวข้ออีเมล
    *   **Message:** เนื้อหาในอีเมล (สามารถใช้ HTML ได้)
4.  หลังจากแก้ไขแล้ว อย่าลืมกด **Save**

### 3. ทดสอบการทำงาน

หลังจากทำตามขั้นตอนข้างต้นแล้ว:
1.  กลับไปที่หน้า "ลืมรหัสผ่าน" บนเว็บไซต์ของคุณ
2.  กรอกอีเมลที่เคยลงทะเบียนไว้แล้ว
3.  กดส่งลิงก์
4.  **ตรวจสอบกล่องจดหมาย (Junk/Spam Folder) ของคุณด้วย** บางครั้งอีเมลจากระบบอาจถูกคัดกรองไปอยู่ที่นั่นในครั้งแรกๆ

เมื่อทำตามขั้นตอนเหล่านี้แล้ว ระบบลืมรหัสผ่านควรจะสามารถส่งอีเมลหาผู้ใช้ได้ทันทีครับ 